# Project3文档

###### 18307130251 蒋晓雯

## JPEG编码过程的详细说明，要求包含操作流程

#### 1.FDCT正向离散余弦变换

把空间域的图转化为频率域的图。

将原始图像分为8px*8px的块, 每个块里有64px。

对于灰度图，每一个像素用8个bit（1byte）表示，这个块可以被表示成一个8x8的二维数组，每一个元素的0-255的8个bit的整数。对二维数组做离散余弦变换。
$$
F\left( u,v \right) =\frac{1}{4}C\left( u \right) C\left( v \right) \left[ \sum_0^7{\sum_0^7{f\left( x,y \right) *\cos \frac{\left( 2x+1 \right) u\pi}{16}\cos \frac{\left( 2y+1 \right) v\pi}{16}}} \right] 
$$
$$
\text{当}u,v=0\text{时，}C\left( u \right) ,C\left( v \right) =\frac{1}{\sqrt{2}}
$$
$$
\text{其他情况下，}C\left( u \right) ,C\left( v \right) =1
$$
$$
F: \text{离散余弦变换结果, }f: \text{原二维数组}
$$
$$
x: \text{行, }y: \text{列}
$$

<center><strong>公式 1 - 离散余弦变换公式</strong></center>

对于彩色图，被认为是对多个灰度图的压缩。

#### 2.量化

对经过FDCT变换后的DCT系数进行量化。量化是多对一的映射，实现数据的压缩，在主观保真的情况下，去掉对视觉效果影响不大的信息。

JPEG的量化采用线性均匀量化器。
$$
\hat{F}\left( u,v \right) =Integer\ Round\left( \frac{F\left( u,v \right)}{Q\left( u,v \right)} \right) 
$$

<center><strong>公式 2 - 量化公式</strong></center>

Q是量化数组。

#### 3.Z字形编码

DCT系数序号小的出现的频率低，把8x8的矩阵转变为一个1x64的矢量，匹配量化系数的能量分布，按递减的方式排序。

#### 4.直流系数编码

![image-20201208174804430](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20201208174804430.png)

进过FDCT变换得到的DC系数是这个图像块能量的主要部分。

有两个特点：

1. 数值大
2. 相邻的块DC系数的值变化不大。

根据这两个特点，使用DPCM（差值编码），用前一个块预测当前块，对相邻图像块之间量化DC系数的差值无失真编码。

#### 5.交流系数编码

量化AC系数的矩阵是稀疏的，有很多连续的0，可以使用RLE（游程编码）来降低数据量。

#### 6.熵编码

对经过DPCM的DC系数和经过RLE的AC系数再进行熵编码，数据量被进一步压缩。

熵编码分为两种：

1. 哈夫曼编码

   采用固定的哈夫曼编码表，对亮度和色度分量有不用的哈夫曼表。出现频率高的哈夫曼码短，低的长。

2. 自适应算术编码

##### DC系数（ZZ(0)）差值的哈夫曼编码

​		对DC系数的差值分类，分为0-11类，给定哈夫曼码。类确定幅值的位数，再确定对应的码字。

##### AC系数（ZZ(i)）的熵编码

​		对每一个非零ZZ(i), 都表示成“NNNN/SSSS”的形式。其中“SSSS”表示幅值范围所属分类；“NNNN”表示当前这个非零系数与前一个非零系数间的位置之差，即非零系数间零系数的行程长度ZRL（0≤ZRL ≤15）。ZRL可能超过15，16个连续的零用“1111/0000”表示，然后用ZRL-16再进行编。EOB（块结束标记）用“0000/0000”表示。

#### 7.组成JPEG位数据流

把编码过的数据和标记组合成一帧一帧的数据进行传输，称为JPEG位数据流。

## Huffman编码的原理

出现频率高的信源字符哈夫曼码短，低的短。使得编码的平均码字长度最短。

## DCT变换的原理

偶函数的傅立叶变换结果是实函数，DCT变换采用图像边界褶翻将像变换为偶函数形式， 然后对图像进行二维傅立叶变换，变换后仅包含余弦项，所以称之为离散余弦变换。DCT编码属于正交变换编码方式，用于去除图像数据的空间冗余。将时域信号变换到系数空间(频域信号)上进行处理。在空间上具有强相关的信号，反映在频域上是在某些特定的区域内能量常常被集中在一起，或者是系数矩阵的分布具有某些规律。图像经DCT变换以 后，DCT系数之间的相关性就会变小，而且大部分能量集中在少数的系数上。人眼对低频敏感，高频不敏感。所以对高频的数据做些修饰，再转回原来形式的数据时，虽然与原始数据有些差异，但是人类的眼睛却是不容易辨认出来。对于变换后的DCT系数进行量化实现了这一过程。